import{j as e,S as E,L as v,r as u,F as m,I as g,U as O,a as P,B as _,M as L,N as S,C as R,b,T as I,c as w,R as A,d as x,e as T,H as C}from"./vendor-aZqaFPTA.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();const k="modulepreload",N=function(n){return"/urls/"+n},y={},j=function(o,i,a){let s=Promise.resolve();if(i&&i.length>0){const t=document.getElementsByTagName("link");s=Promise.all(i.map(r=>{if(r=N(r),r in y)return;y[r]=!0;const l=r.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!a)for(let h=t.length-1;h>=0;h--){const f=t[h];if(f.href===r&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":k,l||(d.as="script",d.crossOrigin=""),d.href=r,document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})}))}return s.then(()=>o()).catch(t=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=t,window.dispatchEvent(r),!r.defaultPrevented)throw t})},B=()=>e.jsx(E,{indicator:e.jsx(v,{style:{fontSize:24},spin:!0})}),F=({error:n,setError:o,onSubmit:i})=>{const[a,s]=u.useState(!1),[t,r]=u.useState(" "),l=async c=>{s(!0),await i(c),s(!1)};return e.jsxs(m,{autoComplete:"off",onChange:()=>o(""),onFinish:l,children:[e.jsx(m.Item,{required:!0,name:"username",label:"Логин",validateStatus:n||!t?"error":"success",help:n&&n||!t&&"Пожалуйста, введите логин!",children:e.jsx(g,{onChange:c=>r(c.target.value),value:t,prefix:e.jsx(O,{}),placeholder:"Логин"})}),e.jsx(m.Item,{name:"password",label:"Пароль",rules:[{required:!0,message:"Пожалуйста, введите пароль!"}],children:e.jsx(g.Password,{prefix:e.jsx(P,{}),placeholder:"Пароль"})}),e.jsx(m.Item,{children:e.jsx(_,{disabled:a||!!n||!t.trim(),type:"primary",htmlType:"submit",children:"ОК"})})]})},U="https://front-test.hex.team/api/",q=({title:n,text:o,isOpen:i,setIsModalOpen:a,setAuth:s})=>{const t=()=>{a(!1),s(!0)};return e.jsx(L,{title:n,open:i,footer:null,onCancel:t,children:e.jsx("p",{children:o})})},{Title:M}=I,z=({isAuth:n,setIsAuth:o})=>{const[i,a]=u.useState(!1),[s,t]=u.useState(""),r=async l=>{const c=await fetch(U+"login",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(l)});if(c.ok){const p=await c.json();sessionStorage.setItem("authToken",JSON.stringify(p)),a(!0)}else{const p=await c.json();t(p.detail)}};return n?e.jsx(S,{to:"/"}):e.jsxs(R,{children:[e.jsx(M,{children:"Авторизация"}),e.jsx(F,{onSubmit:r,error:s,setError:t}),"Или ",e.jsx(b,{to:"/register",children:"зарегистрироваться!"}),e.jsx(q,{title:"Вы успешно вошли!",text:"Переход на домашнюю страницу!",isOpen:i,setAuth:o,setIsModalOpen:a})]})},$=u.lazy(()=>j(()=>import("./index-D8HqiksS.js"),__vite__mapDeps([0,1]))),D=u.lazy(()=>j(()=>import("./index-_wpZdw41.js"),__vite__mapDeps([2,1]))),V=u.lazy(()=>j(()=>import("./index-l_Wejs9S.js"),__vite__mapDeps([3,1])));function H(){const[n,o]=u.useState(!1);return e.jsx(w,{style:{background:"transparent"},children:e.jsx(u.Suspense,{fallback:e.jsx(B,{}),children:e.jsxs(A,{children:[e.jsx(x,{path:"/register",element:e.jsx($,{})}),e.jsx(x,{path:"/login",element:e.jsx(z,{isAuth:n,setIsAuth:o})}),e.jsx(x,{path:"/",element:e.jsx(J,{isAuth:n,children:e.jsx(V,{})})}),e.jsx(x,{path:"*",element:e.jsx(D,{})})]})})})}const J=({children:n,isAuth:o})=>o?n:e.jsx(S,{to:"/login"});T.createRoot(document.getElementById("root")).render(e.jsx(C,{children:e.jsx(H,{})}));export{U as A,q as P,F as U};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-D8HqiksS.js","assets/vendor-aZqaFPTA.js","assets/index-_wpZdw41.js","assets/index-l_Wejs9S.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
